<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <h1>Create, Read, Update, Delete</h1>
        
        Server URL:
        <input data-bind="value: url, valueUpdate: 'afterkeydown'" size="60">
        <button data-bind="click: connect">Connect</button>
        <br>
        <table>
            <thead>
                <th>First name</th>
                <th>Last name</th>
                <th>Address</th>
                <th>Phone info</th>
                <th></th>
            </thead>
            <tbody data-bind="foreach: contacts">
                <tr>
                    <td data-bind="text: firstName"></td>
                    <td data-bind="text: lastName"></td>
                    <td data-bind="with: address">
                        <span data-bind="text: street"></span>
                        <span data-bind="text: town"></span>
                    </td>
                    <td data-bind="text: callInfo"></td>
                    <td><a href="#" data-bind="click: $root.edit">Edit</a></td>
                    <td><a href="#" data-bind="click: $root.delete">Delete</a></td>
                </tr>
            </tbody>
        </table>

        <button data-bind="click: $root.addNew">Add new</button>
        
        <script type="text/html" id="edit-contact">
            First name: <input data-bind="value: firstName">
            Last name: <input data-bind="value: lastName">
            <div data-bind="with: address">
                Street: <input data-bind="value: street">
                Town: <input data-bind="value: town">
            </div>
            <div data-bind="foreach: phones">
                <div>
                Number: <input data-bind="value: number, valueUpdate: 'afterkeydown'">
                type: <input data-bind="value: type">
                <button data-bind="click: $root.removePhoneEdited">-</button>
                <button data-bind="click: $root.addPhoneEdited">+</button>
                <span data-bind="text: validatePhone"></span>
                </div>
            </div>
        </script>

        <div data-bind="template: { name: 'edit-contact', if: edited, data: edited }">
        </div>
        <button data-bind="click: commit">Commit</button>
        
        <div data-bind="text: message"></div>
        
        <!-- boot bck2brwsr -->
        <script type="text/javascript" src="bck2brwsr.js"></script>
        <script>
            var vm = bck2brwsr('client.js');
            var c = vm.loadClass('cz.xelfi.test.client.Main');
            c.invoke('onPageLoad');
        </script>
    </body>
</html>
